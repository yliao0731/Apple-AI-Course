<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Intelligence (AI) 教學重點懶人包</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 設置 Inter 字體為優先，並確保中文字體顯示良好 */
        body {
            font-family: 'Inter', 'Noto Sans TC', 'PingFang TC', sans-serif;
            background-color: #f7f7f7;
            color: #1f2937;
        }
        /* 標題配色使用 Apple 相關的深色系 */
        .header-bg {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
        }
        /* 卡片底色使用淺色，搭配圓角和陰影 */
        .card {
            background-color: white;
            border-radius: 1.5rem; /* 更圓潤的圓角 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-in-out;
        }
        .card:hover {
            /* 讓卡片在滑鼠懸停時略微抬升 */
            transform: translateY(-4px);
        }
        /* 表格樣式 */
        .custom-table th, .custom-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .custom-table th {
            background-color: #f3f4f6;
            color: #4b5563;
            font-weight: 600;
        }
        .custom-table tr:last-child td {
            border-bottom: none;
        }
        /* Accordion 內容預設隱藏，使用過渡效果 */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            padding: 0 1rem;
        }
        /* 展開狀態 */
        .accordion-content.active {
            max-height: 800px; /* 增加最大高度以容納更多內容 */
            padding: 1rem;
        }
        /* 箭頭旋轉效果 */
        .accordion-icon {
            transition: transform 0.4s;
        }
        .accordion-icon.rotate {
            transform: rotate(180deg);
        }
        /* 提醒動畫 */
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            transform: translate3d(0, 0, 0);
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* NEW: 持續提醒光暈 (視覺催促) */
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 0 0 rgba(253, 224, 71, 0.7); } /* Yellow-200 */
            70% { box-shadow: 0 0 0 10px rgba(253, 224, 71, 0); }
            100% { box-shadow: 0 0 0 0 rgba(253, 224, 71, 0); }
        }
        .reminder-glow {
            animation: pulse-glow 1.5s infinite;
            border: 2px solid #FDE047; /* Yellow-400 */
        }
    </style>
</head>
<body onclick="resetInactivityTimer()">
    <!-- 主標題區塊 -->
    <header class="header-bg text-white p-6 rounded-b-2xl shadow-xl">
        <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-2">
                <div>
                    <h1 class="text-2xl sm:text-3xl font-extrabold mb-1">📘 Apple Intelligence (AI) 互動教材</h1>
                    <p class="text-sm font-light opacity-80">點擊區塊，探索 AI 核心功能細節！</p>
                </div>
                <!-- 導航按鈕 -->
                <div class="space-x-3 flex items-center">
                    <a href="quiz.html" class="bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md">
                        隨堂練習
                    </a>
                    <a href="hub.html" class="bg-gray-500 hover:bg-gray-600 text-white text-sm font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md">
                        回中心頁
                    </a>
                </div>
            </div>

            <!-- NPC 語音引導區塊 -->
            <div id="npc-container" class="mt-4 p-3 bg-white/10 backdrop-blur-sm rounded-xl flex items-center shadow-lg transition duration-300">
                <!-- 為圖像容器添加 onclick 事件，使其可點擊以啟動語音 -->
                <div class="relative p-0 mr-3 rounded-full bg-transparent cursor-pointer" onclick="startNarration()">
                    <!-- 使用一個有效的圖片 URL 替代 "uploaded:" -->
                    <img id="speaker-icon" 
                         src="https://i.imgur.com/8Q9P2a7.png" 
                         alt="老萊恩 IP 圖形" 
                         class="w-12 h-12 rounded-full object-cover"
                         onerror="this.src='https://placehold.co/48x48/FDE047/1f2937?text=老萊恩'; this.onerror=null;">
                </div>
                
                <span id="guidance-text" class="text-white text-sm font-medium"></span>
            </div>
            
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 space-y-12">
        
        <!-- 介紹 -->
        <section class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">簡介：系統層級智慧功能</h2>
            <p class="text-gray-600 leading-relaxed">
                Apple Intelligence 是蘋果公司首次將【生成式 AI 模型】深度整合到 【iOS、iPadOS 和 macOS】 中的【系統層級智慧功能】。它專注於個人化、隱私保護，並在所有 App 中提供一致的智慧輔助。
            </p>
        </section>

        <!-- 一、系統與隱私基礎 (表格不需互動，保持參考性) -->
        <section class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="mr-3 text-2xl text-blue-600">🛡️</span>一、系統與隱私基礎
            </h2>
            <div class="overflow-x-auto">
                <table class="custom-table w-full min-w-[600px] border-collapse">
                    <thead>
                        <tr>
                            <th class="rounded-tl-xl">項目</th>
                            <th>說明與優勢</th>
                            <th class="rounded-tr-xl">應用場景舉例</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-semibold text-gray-700 w-1/4">系統級整合</td>
                            <td class="w-1/2">AI 功能深度植入作業系統核心，可在【所有 App (原生或第三方)】的【輸入框中調用】。</td>
                            <td class="w-1/4">寫郵件時，可立即請 AI 調整語氣為「專業」或「輕鬆」。</td>
                        </tr>
                        <tr>
                            <td class="font-semibold text-gray-700">隱私優先架構</td>
                            <td>優先採用 【裝置端處理 (On-Device Processing)】，確保【個人資料不離開裝置】。</td>
                            <td>總結個人訊息對話內容時，數據完全在 iPhone 內運算。</td>
                        </tr>
                        <tr>
                            <td class="font-semibold text-gray-700">私密雲端運算</td>
                            <td>若遇複雜任務需要雲端運算，則透過 【Private Cloud Compute (PCC)】，保證資料【不被蘋果存取或儲存】。</td>
                            <td>生成複雜圖像時，可安全地利用雲端資源而不犧牲隱私。</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 二、三大核心能力 (使用互動式 Accordion) -->
        <section id="core-sections" class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="mr-3 text-2xl text-red-500">✨</span>二、三大核心能力 (點擊展開)
            </h2>
            <div class="space-y-4">
                
                <!-- 1. 寫作工具 -->
                <div id="writing-tools-accordion" class="bg-yellow-100/50 p-4 rounded-lg border-l-4 border-yellow-500 cursor-pointer hover:bg-yellow-100 transition duration-200" onclick="handleAccordionClick('writing-tools')">
                    <h3 class="text-xl font-bold text-gray-800 flex justify-between items-center">
                        1. 寫作工具 (Writing Tools)
                        <span id="icon-writing-tools" class="accordion-icon text-xl">▼</span>
                    </h3>
                </div>
                <div id="writing-tools" class="accordion-content">
                    <ul class="list-disc list-inside space-y-3 text-gray-700 ml-4 p-4 border-t border-gray-200">
                        <li>【系統級寫作輔助】：可在系統【任何文本輸入區域】（如郵件、訊息、備忘錄）一鍵呼叫。</li>
                        <li>【主要功能】：【潤飾/風格調整】（改變語氣：專業、輕鬆、簡潔）、【校對/語法修正】（自動修正錯誤並建議優化）、【總結/摘要】（快速提取長文重點）。</li>
                        <li class="mt-4 text-sm text-gray-500">【詳細設定方式】：在輸入框中【長按或點擊 AI 魔法棒圖示】即可啟動寫作工具。可預設【風格偏好】或【目標字數】範圍。</li>
                    </ul>
                </div>

                <!-- 2. 圖像創作 -->
                <div id="image-creation-accordion" class="bg-green-100/50 p-4 rounded-lg border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition duration-200" onclick="handleAccordionClick('image-creation')">
                    <h3 class="text-xl font-bold text-gray-800 flex justify-between items-center">
                        2. 圖像創作 (Image Creation)
                        <span id="icon-image-creation" class="accordion-icon text-xl">▼</span>
                    </h3>
                </div>
                <div id="image-creation" class="accordion-content">
                    <ul class="list-disc list-inside space-y-3 text-gray-700 ml-4 p-4 border-t border-gray-200">
                        <li>【影像樂園 (Image Playground)】：透過【簡單的文字描述】，在【裝置端快速生成】圖片。</li>
                        <li>【風格選項】：支援【動畫 (Animation)】、【素描 (Sketch)】、【插畫 (Illustration)】 等多種藝術風格。</li>
                        <li>【Genmoji】：透過【自定義文字】生成獨特的【AI 表情符號】，可直接在訊息App中作為反應或貼圖使用。</li>
                        <li class="mt-4 text-sm text-gray-500">【詳細設定方式】：在「訊息 App」的【輸入框左側點擊 + 號】，選擇 【影像樂園】 即可進入創作介面。</li>
                    </ul>
                </div>

                <!-- 3. 情境感知 Siri -->
                <div id="siri-context-accordion" class="bg-purple-100/50 p-4 rounded-lg border-l-4 border-purple-500 cursor-pointer hover:bg-purple-100 transition duration-200" onclick="handleAccordionClick('siri-context')">
                    <h3 class="text-xl font-bold text-gray-800 flex justify-between items-center">
                        3. 情境感知 Siri
                        <span id="icon-siri-context" class="accordion-icon text-xl">▼</span>
                    </h3>
                </div>
                <div id="siri-context" class="accordion-content">
                    <ul class="list-disc list-inside space-y-3 text-gray-700 ml-4 p-4 border-t border-gray-200">
                        <li>【螢幕內容感知】：Siri 現在能夠【理解螢幕上正在顯示的內容】，例如：看到某個地址時，可直接要求「將這個地址儲存到通訊錄」。</li>
                        <li>【跨 App 記憶】：能執行涉及【多個應用程式和記憶上下文】的複雜指令。</li>
                        <li>【指令範例】：例如：「找出 Jane 傳給我關於上次旅行的郵件裡那張【穿紅色外套】的照片」。</li>
                        <li class="mt-4 text-sm text-gray-500">【詳細設定方式】：預設長按側邊按鈕或語音喚醒，但須到 【設定 > Siri 與搜尋】 中開啟【螢幕內容使用權限】以啟動上下文感知功能。</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 三、App 深度整合應用 -->
        <section class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="mr-3 text-2xl text-teal-600">📱</span>三、App 深度整合應用
            </h2>
            <!-- 表格維持非互動式，作為快速參考 -->
            <div class="overflow-x-auto">
                <table class="custom-table w-full min-w-[600px] border-collapse">
                    <thead>
                        <tr>
                            <th class="rounded-tl-xl">App 類別</th>
                            <th class="rounded-tr-xl">主要 AI 應用功能</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-semibold text-gray-700 w-1/3">郵件 (Mail)</td>
                            <td class="w-2/3">【智慧收件箱】： 【自動分類高優先級郵件】。【摘要功能】： 【長篇郵件一鍵總結】，快速掌握重點。</td>
                        </tr>
                        <tr>
                            <td class="font-semibold text-gray-700">提醒事項 / 備忘錄</td>
                            <td>【自動任務建議】： 根據【郵件、訊息、行事曆內容】，【主動建議】【使用者可加入的待辦事項或任務】。</td>
                        </tr>
                        <tr>
                            <td class="font-semibold text-gray-700">照片 (Photos)</td>
                            <td>【搜尋強化】： 支援【自然語言搜尋】，例如：「【找出 Jane 穿紅色外套在海邊拍的照片】」。【清除功能 (Clean Up)】： 【智慧移除照片中不需要的背景物體或人物】。</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

    </main>
    
    <!-- 頁尾 -->
    <footer class="mt-12 p-4 text-center text-gray-500 text-sm">
        &copy; 2025 Apple Intelligence 教學資料 - 僅供參考與學習
    </footer>

    <!-- JavaScript for Interactivity and Speech -->
    <script>
        // --- 語音合成 API ---
        // 【移除】所有 speech API 相關程式碼
        // const synth = window.speechSynthesis;
        // let voices = []; 
        // function updateVoices() { ... }
        // if (synth.onvoiceschanged !== undefined) { ... }
        // updateVoices();
        
        /**
         * 【移除】文本轉語音的核心函數
         */
        // function speakText(text) { ... }

        // --- 狀態和配置 ---
        const NPC_TITLE = "小萊恩"; 
        
        // 文字引導內容
        // 【修改】移除 "我是小萊恩"
        const TEXT_INITIAL = `歡迎來到 Apple Intelligence 課程！請點擊下方的【三大核心能力】區塊，開始探索智慧功能和隱私基礎吧！`; 
        // 【修改】移除 "我是小萊恩" 和 "時間到了"
        const TEXT_REMINDER = `嘿，同學！請記得點擊任一核心能力區塊 (例如：寫作工具) 展開詳細內容喔！`;
        const TEXT_COMPLETED_PROMPT = `課程已全部完成！請點擊右上角的 [隨堂練習] 按鈕，檢視您的學習成果吧！`; 

        // 不同的讚美方式 & 內容重點
        const SECTION_PRAISES = {
            'writing-tools': "做得太棒了！您成功解鎖了第一項功能，表現非常優秀。", 
            'image-creation': "哇，進度神速！圖像創作是 AI 最吸睛的能力之一，做得很好。", 
            'siri-context': "學得真快！情境感知 Siri 是實現跨應用程式智慧的關鍵喔，您掌握得非常棒。" 
        };
        const SECTION_SUMMARIES = { 
            'writing-tools': "接著，【寫作工具】是您在郵件、備忘錄中最實用的 AI 助理。它能幫您【一鍵潤飾、校對或總結】長篇文字，大幅提升寫作效率。",
            'image-creation': "接著，您正在了解【圖像創作】能力。這包含了【影像樂園】和 【Genmoji】，讓您能快速生成【各種風格的圖片】和【獨特的表情符號】。",
            'siri-context': "接著，【情境感知 Siri】是 Apple Intelligence 的核心。她現在能【理解螢幕上的內容】，並執行【跨應用程式的複雜指令】。"
        };
        
        const completedSections = new Set();
        let inactivityTimer = null;
        // 狀態：'initial' -> 'active' -> 'reminder' -> 'quiz_pending' -> 'finished'
        let currentInstruction = 'initial'; 

        // --- DOM 元素 ---
        const guidanceText = document.getElementById('guidance-text');
        const coreSectionsContainer = document.getElementById('core-sections');
        const npcContainer = document.getElementById('npc-container'); 

        // --- 互動與計時器邏輯 ---
        
        /** 啟動導覽與語音的函數 */
        function startNarration() {
            // 如果不是初始狀態，就不要重複觸發
            if (currentInstruction !== 'initial') return;

            guidanceText.textContent = TEXT_INITIAL;
            // speakText(TEXT_INITIAL); // 【移除】播放初始語音
            
            currentInstruction = 'active';
            startInactivityTimer(); // 啟動計時器
        }

        /** * 啟動 5 秒不活動提醒計時器 */
        function startInactivityTimer() {
            clearTimeout(inactivityTimer);
            if (currentInstruction === 'active') {
                inactivityTimer = setTimeout(() => {
                    // 達到 5 秒催促點
                    currentInstruction = 'reminder';
                    guidanceText.textContent = TEXT_REMINDER;
                    // speakText(TEXT_REMINDER); // 【移除】加入語音提醒
                    
                    // 視覺提醒：晃動並持續光暈
                    coreSectionsContainer.classList.add('shake'); 
                    setTimeout(() => coreSectionsContainer.classList.remove('shake'), 1000);
                    npcContainer.classList.add('reminder-glow'); 

                }, 5000); 
            }
        }

        /** * 重設不活動計時器 */
        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            // 移除光暈和晃動
            npcContainer.classList.remove('reminder-glow'); 
            coreSectionsContainer.classList.remove('shake');
            
            if (currentInstruction === 'active') {
                startInactivityTimer();
            }
        }

        /**
         * 處理 Accordion 點擊事件，包含狀態追蹤和文字反饋
         */
        function handleAccordionClick(id) {
            resetInactivityTimer(); 
            
            toggleAccordion(id);
            
            const content = document.getElementById(id);
            if (!content.classList.contains('active')) {
                // 如果是收合，不給反饋，只重設計時器
                return;
            }
            
            // 檢查是否已完成，並給予反饋 (只有第一次點擊時給予鼓勵和總結)
            if (!completedSections.has(id)) {
                completedSections.add(id);
                
                const praise = SECTION_PRAISES[id];
                const summary = SECTION_SUMMARIES[id];
                const feedbackText = `${praise}！ ${summary}`;
                guidanceText.textContent = feedbackText;
                // speakText(feedbackText); // 【移除】播放反饋語音
                
                // 檢查課程完成度
                if (completedSections.size === 3) {
                    currentInstruction = 'quiz_pending';
                    
                    // 課程完成後 5 秒提醒
                    setTimeout(() => {
                        if (currentInstruction === 'quiz_pending') {
                            currentInstruction = 'finished'; 
                            guidanceText.textContent = TEXT_COMPLETED_PROMPT; 
                            // speakText(TEXT_COMPLETED_PROMPT); // 【移除】播放完成語音
                            
                            // 頂部區塊晃動 (瞬時)
                            document.querySelector('header').classList.add('shake'); 
                            setTimeout(() => document.querySelector('header').classList.remove('shake'), 1000);

                            // 維持閃爍直到用戶點擊網頁任意處 (body onclick)
                            npcContainer.classList.add('reminder-glow');
                        }
                    }, 5000); 
                } else {
                    currentInstruction = 'active'; 
                }
            } else {
                // 已學習過，給予簡單提示
                const learnedText = "您已經學過這一區塊囉！請繼續探索其他核心能力。";
                guidanceText.textContent = learnedText;
                // speakText(learnedText); // 【移除】播放已學過提示
                currentInstruction = 'active';
            }
        }

        // --- 輔助函數：Accordion 展開/收合邏輯 (保持原樣) ---
        function toggleAccordion(id) {
            const content = document.getElementById(id);
            const icon = document.getElementById(`icon-${id}`);
            
            const isActive = content.classList.contains('active');

            // 關閉所有其他展開的區塊
            document.querySelectorAll('.accordion-content').forEach(item => {
                if (item.id !== id) {
                    item.classList.remove('active');
                    item.style.maxHeight = 0;
                }
            });
            document.querySelectorAll('.accordion-icon').forEach(item => {
                if (item.id !== `icon-${id}`) {
                    item.classList.remove('rotate');
                }
            });

            // 展開或收合目標區塊
            if (!isActive) {
                content.classList.add('active');
                content.style.maxHeight = content.scrollHeight + 100 + "px"; 
                icon.classList.add('rotate');
            } else {
                content.classList.remove('active');
                content.style.maxHeight = 0;
                icon.classList.remove('rotate');
            }
        }

        // --- 頁面初始化 ---
        window.addEventListener('load', () => {
            // 頁面載入時僅設定好初始狀態，不自動播放語音。等待使用者點擊。
            // 確保所有區塊初始為收合狀態
            document.querySelectorAll('.accordion-content').forEach(content => {
                if (!content.classList.contains('active')) {
                    content.style.maxHeight = 0;
                }
            });
        });
    </script>
</body>
</html>





